<!doctype html>
<html lang="de" dir="ltr">
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="manifest" href="/manifest.json">
		<link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.min.css">
		<link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
		<script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
		<script>
			if ('serviceWorker' in navigator)
			{
				navigator.serviceWorker.register('/sw.js').then(registration =>
				{
					if (registration.active)
					{
						registration.addEventListener('updatefound', () =>
						{
							const installingWorker = registration.installing;

							installingWorker.addEventListener('statechange', () =>
							{
								if (installingWorker.state === 'installed')
								{
									onUpdateFound();
								}
							});
						});
					}
				}).catch(e => console.log(e));
			}

			function onUpdateFound()
			{
				ons.openActionSheet(
				{
					title 		:	'Es ist ein Update verfügbar. Möchten Sie es installieren?',
					cancelable	:	true,
					buttons		:	[
										'Installieren',
										{
											label 	:	'Abbrechen',
											icon	:	'md-close'
										}
									]
				}).then(function (index)
				{
					if (index === 0)
					{
						location.reload();
					}
				});
			}
		</script>
	</head>
	<body>

	</body>
</html>
